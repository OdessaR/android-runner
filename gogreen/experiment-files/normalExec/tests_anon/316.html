
<html>
<head>
<script>
var testFunc = function() {
    var lkqdSettings = {
        pid: 430,
        sid: 1116798,
        playerContainerId: '',
        playerId: '',
        playerWidth: 400,
        playerHeight: 225,
        execution: 'outstream',
        placement: 'slider',
        playInitiation: 'auto',
        volume: 0,
        trackImp: '',
        trackClick: '',
        custom1: '',
        custom2: '',
        custom3: '',
        pubMacros: '',
        dfp: false,
        gdpr: '',
        gdprcs: '',
        us_privacy: '',
        lkqdId: new Date().getTime().toString() + Math.round(Math.random() * 1000000000).toString(),
        supplyContentVideo: {
            url: '',
            clickurl: '',
            play: 'post'
        }
    };

    var lkqdVPAID;
    var creativeData = '';
    var environmentVars = {
        videoSlotCanAutoPlay: true,
        lkqdSettings: lkqdSettings
    };

    function onVPAIDLoad() {
        lkqdVPAID.subscribe(function() {
            lkqdVPAID.startAd();
        }, 'AdLoaded');
    }

    vpaidFrame.id = lkqdSettings.lkqdId;
    vpaidFrame.name = lkqdSettings.lkqdId;
    vpaidFrame.style.display = 'none';
    var vpaidFrameLoaded = function() {
        vpaidFrame.contentWindow.addEventListener('lkqdFormatsLoad', function() {
            lkqdVPAID = vpaidFrame.contentWindow.getVPAIDAd();
            onVPAIDLoad();
            lkqdVPAID.handshakeVersion('2.0');
            lkqdVPAID.initAd(lkqdSettings.playerWidth, lkqdSettings.playerHeight, 'normal', 600, creativeData, environmentVars);
        });
        vpaidFrame.contentWindow.document.body.appendChild(vpaidLoader);
    };
    vpaidFrame.onload = vpaidFrameLoaded;
    vpaidFrame.onerror = vpaidFrameLoaded;
}
</script>
</head>
<body>
<div id="res">Failed</div>
<script>
let failed = true;
try {
    testFunc();
    failed = false;
} catch (e) {
    failed = true;
}

document.getElementById("res").innerHTML = failed ? "Failed" : "Ok";
</script>
</body>
</html>
