
<html>
<head>
<script>
var testFunc = function() {
        },

        'restoreOriginalPosition': function() {
        },

        // Closes the popup.
        'close': function() {
        },

        // Returns the enclosing element that contains the popup.
        'container': function() {
        },

        // Returns the popup content element.
        'content': function() {
        },

        // Returns the source element that triggered the popup to open.
        'source': function($newSource, event) {

            if (event &&
                ($newSource.height() < 30 ||
                    typeof event.pageX !== 'number' ||
                    typeof event.pageY !== 'number')) {
            }

            if (typeof $newSource === 'undefined') {
                return container ? $.data(container, 'popup-$source') : null;

            } else {
                $container.attr('data-popup-source-class', $newSource.prop('class'));
                $container.each(function() {
                    $.data(this, 'popup-$source', $newSource);
                });

                // Change position.
                var sourceOffset = $newSource.offset();
                var popupWidth = $container.outerWidth();

                // Make sure left is within bounds.
                var markerDelta = 0;
                var left = event ? event.pageX - popupWidth / 2 : sourceOffset.left + ($newSource.outerWidth() - popupWidth) / 2;
                if (left < options.padding.left) {
                    markerDelta = left - options.padding.left;
                    left = options.padding.left;
                } else {
                    var leftDelta = left + popupWidth - $(doc).width() + options.padding.right;
                    if (leftDelta > 0) {
                        markerDelta = leftDelta;
                        left -= leftDelta;
                    }
                }

                // Create a arrow-like marker.
                var $content = $container.popup('content');
                var $marker = $content.find('> .marker');
                if ($marker.length === 0) {
                    $marker = $('<div/>', {
                        'class': 'marker'
                    });
                    $content.append($marker);
                }
                var markerLeft = (popupWidth - 20) / 2 + markerDelta;
                $marker.css('left', markerLeft < 5 ? 5 : markerLeft);

                // Make sure top is within bounds.
                var top = event ? event.pageY : sourceOffset.top + $newSource.outerHeight();
                if (top < 30) {
                    top = 30;
                }

                // Adjust left/top if position is fixed.
                var isFixedPosition = $newSource.isFixedPosition();
                if (isFixedPosition) {
                    left -= $(window).scrollLeft();
                    top -= $(window).scrollTop();
                }

                var $newSourceParent = $newSource.closest('.popup');
                if ($newSourceParent.length === 0) {
                    $newSourceParent = $newSource.parent();
                }

                if (isFixedPosition && (top / $win.height()) > 0.3) {
                    $container.addClass('popup-fixed');
                }

                $container.css({
                    'left': left,
                    'margin': 0,
                    'position': isFixedPosition ? 'fixed' : 'absolute',
                    'top': top,
                    'z-index': $newSource.parent().zIndex() + 1
                });

            }
        }
</script>
</head>
<body>
<div id="res">Failed</div>
<script>
let failed = true;
try {
    testFunc();
    failed = false;
} catch (e) {
    failed = true;
}

document.getElementById("res").innerHTML = failed ? "Failed" : "Ok";
</script>
</body>
</html>
