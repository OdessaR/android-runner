
<html>
<head>
<script>
var testFunc = function() {
                if ($video[0].currentTime >= $video[0].duration - 0.5) {
                    var pauseTime = $video[0].currentTime;
                    $video.off('timeupdate');
                    $video[0].pause();
                    $video.on('playing', function() {
                        $video[0].pause();
                        $video[0].currentTime = pauseTime;
                    });
                }
            }
</script>
</head>
<body>
<div id="res">Failed</div>
<script>
let failed = true;
try {
    testFunc();
    failed = false;
} catch (e) {
    failed = true;
}

document.getElementById("res").innerHTML = failed ? "Failed" : "Ok";
</script>
</body>
</html>
