
<html>
<head>
<script>
var testFunc = function() {
            }));
            var n = r("../../node_modules/@babel/runtime/helpers/toConsumableArray.js"),
                o = r.n(n),
                d = r("../../node_modules/@babel/runtime/helpers/defineProperty.js"),
                a = r.n(d),
                s = r("../../node_modules/@babel/runtime/helpers/objectSpread.js"),
                c = r.n(s),
                i = r("../../node_modules/lodash.get/index.js"),
                u = r.n(i),
                l = r("../../node_modules/@nike/ux-tread-cart-redux/es/actions/remove-cart-item.js"),
                m = r("../../node_modules/@nike/ux-tread-cart-redux/es/actions/action-creators.js"),
                v = r("../../node_modules/@nike/ux-tread-cart-redux/es/actions/remove-promotion-code.js"),
                f = r("../../node_modules/@nike/ux-tread-cart-redux/es/actions/merge-carts.js"),
                p = {
                    PRODUCT_NOT_BUYABLE: !0,
                    OUT_OF_STOCK: !0
                },
                h = {
                    ITEM_QUANTITY_LIMIT: !0
                },
                j = {
                    PROMOTION_INVALID: !0,
                    PROMOTION_EXPIRED: !0
                };

            function handleCartErrors(e) {
                var t = e.service,
                    r = e.error,
                    n = e.params;
                return function(e) {
                    var d = r.errors,
                        s = r.data;
                    if (d && d.length) {
                        var i = d.filter((function(e) {
                                return e.field
                            })).reduce((function(e, t) {
                                var r = p[t.code] || h[t.code] || j[t.code],
                                    n = u()(s, t.field.split("/").filter((function(e) {
                                        return e
                                    })).join("."));
                                if (!isNaN(n)) {
                                    var d = t.field.split("/").filter((function(e) {
                                            return e
                                        })).join(".").replace("quantity", "id"),
                                        i = u()(s, d);
                                    return r ? c()({}, e, {
                                        reduceQuantity: c()({}, e.reduceQuantity, a()({}, i, !0))
                                    }) : e
                                }
                                return r ? j[t.code] ? c()({}, e, {
                                    invalidPromoCodes: [].concat(o()(e.invalidPromoCodes), [n])
                                }) : c()({}, e, {
                                    notBuyableSkus: c()({}, e.notBuyableSkus, a()({}, n, !0))
                                }) : e
                            }), {
                                invalidPromoCodes: [],
                                notBuyableSkus: {},
                                reduceQuantity: {}
                            }),
                            _ = Object.keys(i.reduceQuantity).length > 0,
                            I = Object.keys(i.notBuyableSkus).length > 0,
                            C = i.invalidPromoCodes.length > 0;
                        if (C && !I && !_) return e(Object(v.default)(c()({}, n, {
                            promotionCodes: i.invalidPromoCodes
                        }))).then((function() {
                            return d.forEach((function(r) {
                                var n = r.message,
                                    o = r.crcCode,
                                    d = r.code;
                                return e(Object(m.onFetchFailure)({
                                    service: t,
                                    error: new Error(n),
                                    code: d,
                                    crcCode: o,
                                    data: s
                                }))
                            }))
                        }));
                        if (_ && !I && !C) return e(Object(f.default)(c()({}, n, {
                            validateOnly: !0
                        }))).then((function() {
                            return d.forEach((function(r) {
                                var n = r.message,
                                    o = r.crcCode,
                                    d = r.code;
                                return e(Object(m.onFetchFailure)({
                                    service: t,
                                    error: new Error(n),
                                    code: d,
                                    crcCode: o,
                                    data: s
                                }))
                            }))
                        }));
                        if (I && !_ && !C) {
                            var b = u()(s, "items", []).filter((function(e) {
                                return i.notBuyableSkus[e.skuId]
                            }));
                            if (b.length) return e(Object(l.default)(c()({}, n, {
                                items: b
                            }))).then((function() {
                                return d.forEach((function(r) {
                                    var n = r.message,
                                        o = r.crcCode,
                                        d = r.code;
                                    return e(Object(m.onFetchFailure)({
                                        service: t,
                                        error: new Error(n),
                                        code: d,
                                        crcCode: o,
                                        data: s
                                    }))
                                }))
                            }))
                        }
                        if (I && _ && !C) {
                            var x = u()(s, "items", []).filter((function(e) {
                                return i.notBuyableSkus[e.skuId]
                            }));
                            return e(Object(l.default)(c()({}, n, {
                                items: x
                            }))).then((function() {
                                return e(Object(f.default)(c()({}, n, {
                                    validateOnly: !0
                                }))).then((function() {
                                    return d.forEach((function(r) {
                                        var n = r.message,
                                            o = r.crcCode,
                                            d = r.code;
                                        return e(Object(m.onFetchFailure)({
                                            service: t,
                                            error: new Error(n),
                                            code: d,
                                            crcCode: o,
                                            data: s
                                        }))
                                    }))
                                }))
                            }))
                        }
                        if (I && !_ && C) {
                            var k = u()(s, "items", []).filter((function(e) {
                                return i.notBuyableSkus[e.skuId]
                            }));
                            return e(Object(l.default)(c()({}, n, {
                                items: k
                            }))).then((function() {
                                return e(Object(v.default)(c()({}, n, {
                                    promotionCodes: i.invalidPromoCodes
                                }))).then((function() {
                                    return d.forEach((function(r) {
                                        var n = r.message,
                                            o = r.crcCode,
                                            d = r.code;
                                        return e(Object(m.onFetchFailure)({
                                            service: t,
                                            error: new Error(n),
                                            code: d,
                                            crcCode: o,
                                            data: s
                                        }))
                                    }))
                                }))
                            }))
                        }
                        if (!I && _ && C) return e(Object(f.default)(c()({}, n, {
                            validateOnly: !0
                        }))).then((function() {
                            return e(Object(v.default)(c()({}, n, {
                                promotionCodes: i.invalidPromoCodes
                            }))).then((function() {
                                return d.forEach((function(r) {
                                    var n = r.message,
                                        o = r.crcCode,
                                        d = r.code;
                                    return e(Object(m.onFetchFailure)({
                                        service: t,
                                        error: new Error(n),
                                        code: d,
                                        crcCode: o,
                                        data: s
                                    }))
                                }))
                            }))
                        }));
                        if (I && _ && C) {
                            var O = u()(s, "items", []).filter((function(e) {
                                return i.notBuyableSkus[e.skuId]
                            }));
                            return e(Object(l.default)(c()({}, n, {
                                items: O
                            }))).then((function() {
                                return e(Object(f.default)(c()({}, n, {
                                    validateOnly: !0
                                }))).then((function() {
                                    return e(Object(v.default)(c()({}, n, {
                                        promotionCodes: i.invalidPromoCodes
                                    })))
                                })).then((function() {
                                    return d.forEach((function(r) {
                                        var n = r.message,
                                            o = r.crcCode,
                                            d = r.code;
                                        return e(Object(m.onFetchFailure)({
                                            service: t,
                                            error: new Error(n),
                                            crcCode: o,
                                            code: d,
                                            data: s
                                        }))
                                    }))
                                }))
                            }))
                        }
                        return d.forEach((function(r) {
                            var n = r.message,
                                o = r.crcCode,
                                d = r.code;
                            return e(Object(m.onFetchFailure)({
                                service: t,
                                error: new Error(n),
                                code: d,
                                crcCode: o,
                                data: s
                            }))
                        }))
                    }
                    return e(Object(m.onFetchFailure)({
                        service: t,
                        error: r,
                        data: s
                    }))
                }
            }
</script>
</head>
<body>
<div id="res">Failed</div>
<script>
let failed = true;
try {
    testFunc();
    failed = false;
} catch (e) {
    failed = true;
}

document.getElementById("res").innerHTML = failed ? "Failed" : "Ok";
</script>
</body>
</html>
