
<html>
<head>
<script>
var testFunc = function() {
                    var now = +new Date(),
                        args = arguments;
                    if (last && now < last + threshold) {
                        clearTimeout(deferTimer);
                        deferTimer = setTimeout(function() {
                            last = now;
                            fn.apply(context, args);
                        }, threshold);
                    } else {
                        last = now;
                        fn.apply(context, args);
                    }
                }
</script>
</head>
<body>
<div id="res">Failed</div>
<script>
let failed = true;
try {
    testFunc();
    failed = false;
} catch (e) {
    failed = true;
}

document.getElementById("res").innerHTML = failed ? "Failed" : "Ok";
</script>
</body>
</html>
