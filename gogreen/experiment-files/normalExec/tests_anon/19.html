
<html>
<head>
<script>
var testFunc = function() {
                var element = $(this),
                    childsPageBuilder = element.find('[data-element="inner"]');
                if (childsPageBuilder.length) {
                    $('[data-content-type="ammega_menu_widget"]').each(function() {
                        if (!$(this).children().length) {
                            $(this).remove();
                        }
                    });
                    var isEmpty = true;
                    $(childsPageBuilder).each(function() {
                        if ($(this).children().length) {
                            isEmpty = false;
                            return true;
                        }
                    });
                    if (isEmpty) {
                        element.remove();
                    }
                }
            }
</script>
</head>
<body>
<div id="res">Failed</div>
<script>
let failed = true;
try {
    testFunc();
    failed = false;
} catch (e) {
    failed = true;
}

document.getElementById("res").innerHTML = failed ? "Failed" : "Ok";
</script>
</body>
</html>
